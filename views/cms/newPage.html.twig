{% if not isSocket %}
	{% extends "layout.html.twig" %}
	{% block title %}{{title}}{% endblock %}
{% endif %}

{% block content %}
	<h1>{{title}}</h1>

	{# CMS Pages #}
	<div class="highlight row">
		<h2>CMS Pages</h2>
		<table class="table table-hover">
			<thead>
				<tr>
					<th>_id</th>
					<th>Name</th>
					<th>Title</th>
					<th>Template</th>
					<th>Route</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody>
			{% for page in pages %}
			<tr id="{{page._id}}" data-edit="updateCmsPage">

				<td data-field="_id">{{page._id}}</td>
				<td data-field="name">{{page.name}}</td>
				<td data-field="title">{{page.title}}</td>
				<td data-field="template">{{page.template}}</td>
				<td data-field="route">{{page.route}}</td>

				<td>
					<div class="btn-group">
					  <button type="button" class="btn btn-default btn-sm disabled" data-save>
					  	<span class="glyphicon glyphicon-floppy-disk"></span>
					 </button>
					  <button type="button" class="btn btn-default btn-sm" data-delete>
					  	<span class="glyphicon glyphicon-ban-circle"></span>
					  </button>
					</div>

					<input type="hidden" name="_id" value="{{page._id}}">
				</td>

			</tr>

			{% endfor %}
			</tbody>
		</table>
	</div>
	<form action="/cms/new/page" method="socket" class="highlight form-horizontal row newPageForm" data-form="newCmsPage" role="form" data-component="wysihtml5">


		<h3>New CMS Page</h3>

	    <div class="form-group">
			<label class="col-sm-1 control-label">Name</label>
			<div class="col-sm-11">
	    		<input type="text" class="form-control" id="" name="name" value="" data-field="name">
	    	</div>
    	</div>

    	<div class="form-group">
    	  <label class="col-sm-1 control-label">Title</label>
    	  <div class="col-sm-11">
    	    <input type="text" class="form-control" id="" name="title" value="" data-field="title">
    	  </div>
    	</div>

    	<div class="form-group">
    	  <label class="col-sm-1 control-label">Template</label>
    	  <div class="col-sm-11">
    	    <input type="text" class="form-control" id="" name="template" value="" data-field="template">
    	  </div>
    	</div>

    	<div class="form-group">
    	  <label class="col-sm-1 control-label">Route</label>
    	  <div class="col-sm-11">
    	    <input type="text" class="form-control" id="" name="route" value="" data-field="route">
    	  </div>
    	</div>

		<!-- <button type="submit" class="btn btn-default">Add</button> -->

		<textarea id="newPageEditor" class="col-md-12" name="html" placeholder="Enter your text ..." autofocus data-field="html"></textarea>
	</form>
	<script type="text/javascript">
		// $(document).ready(function(){
		// 	if ($.isFunction($.fn.wysihtml5)) {
		// 		$('#newPageEditor').wysihtml5();
		// 	} else {
		// 		console.log('Problem initializing wysihtml5');
		// 	}
		// });
	</script>
{% endblock contner %}